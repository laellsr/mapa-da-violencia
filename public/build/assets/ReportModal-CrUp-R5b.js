const c=window.location.protocol+"//"+window.location.host+"/api/";async function a(){try{return await(await fetch(c+"crimes")).json()}catch(e){console.log(e)}}a().then(e=>{const r=document.getElementById("crimeType");e.forEach(t=>{var o=document.createElement("option");o.value=t.id,o.text=t.name,r.appendChild(o)})}).catch(e=>{console.log(e)});document.addEventListener("DOMContentLoaded",function(){var e=document.getElementById("report_form");e.addEventListener("submit",function(r){try{var t=JSON.parse(localStorage.getItem("currentLocationModal"));console.log(t.name);var o={crime_id:document.getElementById("crimeType").value,osm_type:t.osm_type[0].toUpperCase(),osm_id:t.osm_id,lat:t.lat,lon:t.lon,date:document.getElementById("date_ocorrencia").value,time:document.getElementById("time_ocorrencia").value};console.log(o),fetch(c+"reports/store",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)}).then(n=>n.json()).then(n=>{}).catch(n=>{console.error("Error:",n)})}catch(n){console.error("Error:",n)}})});
